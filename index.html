<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8"><meta name="viewport" content="width=device-width,initial-scale=1">
  <title>Linkin Park Year Guesser</title>
  <style>/* your existing styles here */</style>
</head>
<body>
<div class="container"><h1>üé§ Linkin Park Year Guesser</h1>

<div id="loginScreen" class="screen active">
  <h2>Login</h2>
  <div class="form-group">
    <label>Username:</label><input type="text" id="username" placeholder="Playsso or Aybel">
  </div>
  <div class="checkbox-group">
    <input type="checkbox" id="rememberMe"><label for="rememberMe">Remember me</label>
  </div>
  <button onclick="login()">Login</button>
  <div id="loginError" style="color:#ff6b6b;text-align:center;margin-top:10px"></div>
</div>

<div id="lobbyScreen" class="screen">
  <h2>Welcome, <span id="welcomeUser"></span>!</h2>
  <div class="lobby-buttons">
    <button onclick="showCreateGame()">Create Game</button>
    <button onclick="showJoinGame()">Join Game</button>
  </div>
 <div class="leaderboard"><h3>üèÜ Leaderboard</h3><div id="leaderboardList">
    <div class="leaderboard-item"><span>Playsso</span><span id="playssoScore">0 points</span></div>
    <div class="leaderboard-item"><span>Aybel</span><span id="aybelScore">0 points</span></div>
  </div></div>
  <div class="game-history"><h3>üìö Game History</h3><div id="gameHistoryList"><div class="history-item">No games played yet</div></div></div>
</div>

<div id="createGameScreen" class="screen">
  <h2>Create Game</h2>
  <div class="filters">
    <div class="form-group"><label>Album:</label><select id="albumSelect" onchange="loadSongs()"><option value="">Select Album</option></select></div>
    <div class="form-group"><label>Year:</label><select id="yearFilter"><option value="">Any Year</option></select></div>
  </div>
  <div class="song-list" id="songList"><div>Select an album to see songs</div></div>
  <div id="audioPreview" class="audio-player" style="display:none;">
    <audio id="previewAudio" controls></audio>
    <div class="game-info" id="songInfo"></div>
  </div>
  <div style="text-align:center;margin-top:20px">
    <button onclick="startGame()" id="startGameBtn" disabled>Create & Get Invite</button>
    <button onclick="showLobby()">Back to Lobby</button>
  </div>
</div>

<div id="joinGameScreen" class="screen">
  <h2>Join Game</h2>
  <div class="form-group"><label>Game Code:</label><input type="text" id="gameCode" placeholder="Enter invite code (e.g. INV2900)"></div>
  <button onclick="joinGame()">Join Game</button>
  <button onclick="showLobby()">Back to Lobby</button>
  <div id="joinError" style="color:#ff6b6b;text-align:center;margin-top:10px"></div>
</div>

<div id="waitingScreen" class="screen"><div class="waiting-screen"><h2>Waiting...</h2><div class="spinner"></div><p id="waitingMessage">Song is being selected...</p></div></div>

<div id="gameScreen" class="screen">
  <h2>Round <span id="roundNumber">1</span></h2>
  <div id="creatorView" style="display:none"> <div class="game-info"><h3>You are Creator</h3><p>Wait for <span id="guesserName"></span> to guess</p></div>
    <div class="audio-controls"><button class="play-btn" onclick="toggleAudio()">‚ñ∂Ô∏è</button></div>
    <audio id="gameAudio"></audio>
    <div class="game-info"><div><strong>Song:</strong> <span id="currentSong"></span></div><div><strong>Year:</strong> <span id="currentYear"></span></div></div>
  </div>
  <div id="guesserView" style="display:none">
    <div class="game-info"><h3>Guess the Year</h3><p>Listen and guess</p></div>
    <div class="audio-controls"><button class="play-btn" onclick="toggleAudio()">‚ñ∂Ô∏è</button></div>
    <audio id="gameAudioGuesser"></audio>
    <div class="form-group"><label>Your Guess:</label><input type="number" id="yearGuess" placeholder="e.g. 2003" min="1999" max="2025"></div>
    <button onclick="submitGuess()" id="guessBtn">Guess</button>
  </div>
</div>

<div id="resultsScreen" class="screen">
  <div class="result-screen">
    <h2 id="resultTitle"></h2>
    <div class="game-info">
      <div><strong>Song:</strong> <span id="resultSong"></span></div>
      <div><strong>Year:</strong> <span id="resultYear"></span></div>
      <div><strong>Your Guess:</strong> <span id="resultGuess"></span></div>
      <div><strong>Winner:</strong> <span id="resultWinner"></span></div>
    </div>
    <div style="margin:20px 0">
      Playsso: <span id="gameScorePlaysso">0</span><br>
      Aybel: <span id="gameScoreAybel">0</span>
    </div>
    <button onclick="playAgain()">Play Again</button>
    <button onclick="endGame()">End Game</button>
  </div>
</div>
</div>

<script type="module">
import { initializeApp } from 'https://www.gstatic.com/firebasejs/10.7.0/firebase-app.js';
import { getFirestore, doc, collection, setDoc, getDoc, getDocs, updateDoc } from 'https://www.gstatic.com/firebasejs/10.7.0/firebase-firestore.js';
const firebaseConfig = { /* ... your config ... */ };
const app = initializeApp(firebaseConfig), db = getFirestore(app);
window.db = db;
</script>

<script>
let currentUser='', gameState={}, songsData=[], selectedSong=null;
const fullTracklist = [
  // Hybrid Theory (2000)
  {id:1,album:'Hybrid Theory',year:2000,title:'Papercut'},
  {id:2,album:'Hybrid Theory',year:2000,title:'One Step Closer'},
  {id:3,album:'Hybrid Theory',year:2000,title:'With You'},
  {id:4,album:'Hybrid Theory',year:2000,title:'Points of Authority'},
  {id:5,album:'Hybrid Theory',year:2000,title:'Crawling'},
  {id:6,album:'Hybrid Theory',year:2000,title:'Runaway'},
  {id:7,album:'Hybrid Theory',year:2000,title:'A Place for My Head'},
  {id:8,album:'Hybrid Theory',year:2000,title:'Forgotten'},
  {id:9,album:'Hybrid Theory',year:2000,title:'Pushing Me Away'},
  {id:10,album:'Hybrid Theory',year:2000,title:'In the End'},
  // Meteora (2003)  [oai_citation:0‚Ä°Apple¬†Music - Web Player](https://music.apple.com/us/album/meteora/528435845?utm_source=chatgpt.com)
  {id:11,album:'Meteora',year:2003,title:"Don't Stay"}, {id:12,album:'Meteora',year:2003,title:'Somewhere I Belong'},
  {id:13,album:'Meteora',year:2003,title:'Lying from You'},
  {id:14,album:'Meteora',year:2003,title:'Papercut'},
  {id:15,album:'Meteora',year:2003,title:'Points of Authority'},
  {id:16,album:'Meteora',year:2003,title:'Runaway'},
  {id:17,album:'Meteora',year:2003,title:'Breaking the Habit'},
  {id:18,album:'Meteora',year:2003,title:'From the Inside'},
  {id:19,album:'Meteora',year:2003,title:'Nobody's Listening'},
  {id:20,album:'Meteora',year:2003,title:'Faint'},
  {id:21,album:'Meteora',year:2003,title:'Figure.09'},
  // Minutes to Midnight (2007)  [oai_citation:1‚Ä°Wikipedia](https://en.wikipedia.org/wiki/Meteora_%28album%29?utm_source=chatgpt.com) [oai_citation:2‚Ä°Reddit](https://www.reddit.com/r/LinkinPark/comments/p1mitx/hybrid_theory_original_tracklist/?utm_source=chatgpt.com) [oai_citation:3‚Ä°YouTube Music](https://music.youtube.com/browse/MPREb_qMlbe7gLeuH?utm_source=chatgpt.com) [oai_citation:4‚Ä°Linkin Park Store](https://store.linkinpark.com/products/meteora-cd?srsltid=AfmBOopR8vZmFdVLk5bLQsnOMOciCFryucl4GFtIUFe31Jllfa-AYglK&utm_source=chatgpt.com)
  {id:22,album:'Minutes to Midnight',year:2007,title:'Wake'},
  {id:23,album:'Minutes to Midnight',year:2007,title:'Given Up'},
  {id:24,album:'Minutes to Midnight',year:2007,title:'Leave Out All the Rest'},
  {id:25,album:'Minutes to Midnight',year:2007,title:'Bleed It Out'},
  {id:26,album:'Minutes to Midnight',year:2007,title:'Shadow of the Day'},
  {id:27,album:'Minutes to Midnight',year:2007,title:"What I've Done"},
  {id:28,album:'Minutes to Midnight',year:2007,title:'Hands Held High'},
  {id:29,album:'Minutes to Midnight',year:2007,title:'No More Sorrow'},
  {id:30,album:'Minutes to Midnight',year:2007,title:"Valentine's Day"},
  {id:31,album:'Minutes to Midnight',year:2007,title:'In Between'},
  {id:32,album:'Minutes to Midnight',year:2007,title:'In Pieces'},
  {id:33,album:'Minutes to Midnight',year:2007,title:'The Little Things Give You Away'},
  // A Thousand Suns (2010)  [oai_citation:5‚Ä°Wikipedia](https://en.wikipedia.org/wiki/Minutes_to_Midnight_%28Linkin_Park_album%29?utm_source=chatgpt.com) [oai_citation:6‚Ä°Linkin Park Store](https://store.linkinpark.com/products/minutes-to-midnight-cd?srsltid=AfmBOoq6IJwd6ug8Ab6Q7PPM-06fo-DbnJHtkq7VSJ_HhOQU8wWWN-b2&utm_source=chatgpt.com) [oai_citation:7‚Ä°Wikipedia](https://en.wikipedia.org/wiki/A_Thousand_Suns?utm_source=chatgpt.com)
  {id:34,album:'A Thousand Suns',year:2010,title:'The Requiem'},
  {id:35,album:'A Thousand Suns',year:2010,title:'Wretches and Kings'},
  {id:36,album:'A Thousand Suns',year:2010,title:'Burning in the Skies'},
  {id:37,album:'A Thousand Suns',year:2010,title:'Empty Spaces'},
  {id:38,album:'A Thousand Suns',year:2010,title:'When They Come for Me'},
  {id:39,album:'A Thousand Suns',year:2010,title:'Robot Boy'},
  {id:40,album:'A Thousand Suns',year:2010,title:'Jornada Del Muerto'},
  {id:41,album:'A Thousand Suns',year:2010,title:'Waiting for the End'},
  {id:42,album:'A Thousand Suns',year:2010,title:'Blackout'},
  {id:43,album:'A Thousand Suns',year:2010,title:'Wretches and Kings'},
  {id:44,album:'A Thousand Suns',year:2010,title:'Iridescent'},
  {id:45,album:'A Thousand Suns',year:2010,title:'Fallout'},
  {id:46,album:'A Thousand Suns',year:2010,title:'The Catalyst'},
  {id:47,album:'A Thousand Suns',year:2010,title:'The Messenger'},
  // Living Things (2012)  [oai_citation:8‚Ä°Wikipedia](https://en.wikipedia.org/wiki/A_Thousand_Suns?utm_source=chatgpt.com) [oai_citation:9‚Ä°Apple¬†Music - Web Player](https://music.apple.com/us/album/a-thousand-suns-deluxe-edition/590434066?utm_source=chatgpt.com) [oai_citation:10‚Ä°Amazon](https://www.amazon.com/Thousand-Suns-Linkin-Park/dp/B003V9J6QQ?utm_source=chatgpt.com) [oai_citation:11‚Ä°Linkin Park Store](https://store.linkinpark.com/products/a-thousand-suns-cd-sept2010-release?srsltid=AfmBOorJ5CbUpXVIDUBtSqsYndsPktS2bGwgNp0UIlnOPZkywG6RQOBC&utm_source=chatgpt.com) [oai_citation:12‚Ä°Apple Music - Web Player](https://music.apple.com/us/album/living-things/518869932?utm_source=chatgpt.com)
  {id:48,album:'Living Things',year:2012,title:'Lost in the Echo'},
  {id:49,album:'Living Things',year:2012,title:'In My Remains'},
  {id:50,album:'Living Things',year:2012,title:'Burn It Down'},
  {id:51,album:'Living Things',year:2012,title:'Lies Greed Misery'},
  {id:52,album:'Living Things',year:2012,title:"I'll Be Gone"},
  {id:53,album:'Living Things',year:2012,title:'Castle of Glass'},
  {id:54,album:'Living Things',year:2012,title:'Victimized'},
  {id:55,album:'Living Things',year:2012,title:'Roads Untraveled'},
  {id:56,album:'Living Things',year:2012,title:'Skin to Bone'},
  {id:57,album:'Living Things',year:2012,title:'Until It Breaks'},
  {id:58,album:'Living Things',year:2012,title:'Powerless'},
  // The Hunting Party (2014)  [oai_citation:13‚Ä°Apple¬†Music - Web Player](https://music.apple.com/us/album/living-things/518869932?utm_source=chatgpt.com) [oai_citation:14‚Ä°linkinpedia.com](https://linkinpedia.com/wiki/Living_Things?utm_source=chatgpt.com) [oai_citation:15‚Ä°Linkin Park Store](https://store.linkinpark.com/products/living-things-cd?srsltid=AfmBOoru-LAlNfgGyUn7JUSl6_LrEqVdHaokQ69IAQAHVebIrbIcR44J&utm_source=chatgpt.com) [oai_citation:16‚Ä°Wikipedia](https://en.wikipedia.org/wiki/Living_Things_%28Linkin_Park_album%29?utm_source=chatgpt.com) [oai_citation:17‚Ä°Wikipedia](https://en.wikipedia.org/wiki/The_Hunting_Party_%28album%29?utm_source=chatgpt.com)
  {id:59,album:'The Hunting Party',year:2014,title:'Keys to the Kingdom'},
  {id:60,album:'The Hunting Party',year:2014,title:'All for Nothing'},
  {id:61,album:'The Hunting Party',year:2014,title:'Guilty All the Same'},
  {id:62,album:'The Hunting Party',year:2014,title:'The Summoning'},
  {id:63,album:'The Hunting Party',year:2014,title:'War'},
  {id:64,album:'The Hunting Party',year:2014,title:'Wastelands'},
  {id:65,album:'The Hunting Party',year:2014,title:"Until It's Gone"}, {id:66,album:'The Hunting Party',year:2014,title:'Rebellion'},
  {id:67,album:'The Hunting Party',year:2014,title:'Mark the Graves'} ,
  {id:68,album:'The Hunting Party',year:2014,title:'Final Masquerade'},
  // One More Light (2017)  [oai_citation:18‚Ä°Linkin Park Store](https://store.linkinpark.com/products/the-hunting-party-cd?srsltid=AfmBOophuGL_z6vSqDqs9AM-pbwRSrcn9UxjLvasACEdaC9_mFla3prS&utm_source=chatgpt.com) [oai_citation:19‚Ä°Wikipedia](https://en.wikipedia.org/wiki/The_Hunting_Party_%28album%29?utm_source=chatgpt.com) [oai_citation:20‚Ä°Linkin Park Store](https://store.linkinpark.com/products/one-more-light-cd?srsltid=AfmBOopbc-kSHXTtAGWWuP5qhQCqC9yEzR97Noz_v0ZAklokVYAkgz9s&utm_source=chatgpt.com)
  {id:69,album:'One More Light',year:2017,title:'Nobody Can Save Me'},
  {id:70,album:'One More Light',year:2017,title:'Good Goodbye'},
  {id:71,album:'One More Light',year:2017,title:'Talking to Myself'},
  {id:72,album:'One More Light',year:2017,title:'Battle Symphony'}, {id:73,album:'One More Light',year:2017,title:'Invisible'},
  {id:74,album:'One More Light',year:2017,title:'Heavy'},
  {id:75,album:'One More Light',year:2017,title:'Sorry for Now'},
  {id:76,album:'One More Light',year:2017,title:'Halfway Right'},
  {id:77,album:'One More Light',year:2017,title:'One More Light'}
];

window.onload = () => {
 songsData = fullTracklist;
 populateAlbums(); populateYears();
 checkRememberedUser(); loadLeaderboard();
};

// ... rest of JS just as above, unchanged ...
</script>
</body>
</html>